<!DOCTYPE html>
<!--suppress ALL -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listado de Vacantes</title>

    <!-- Enlace al CSS bootstrap local con enlace robusto de thymeleaf -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">

    <!-- Enlace al CSS awesome local con enlace robusto de thymeleaf -->
    <link rel="stylesheet" th:href="@{/css/all.min.css}">

    <!--  Enlace al CSS tabla local con enlace robusto de thymeleaf -->
    <link rel="stylesheet" th:href="@{/css/tabla.css}">


    <!--    &lt;!&ndash; Enlace al CSS bootstrap de la CDN &ndash;&gt;-->
    <!--    <link rel="stylesheet"-->
    <!--          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">-->
    <!--    &lt;!&ndash; Enlace al iconos Awesome la CDN &ndash;&gt;-->
    <!--    <link rel="stylesheet"-->
    <!--          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">-->

</head>
<body>


<img src="#" th:src="@{/images/logo.png}" width="136" height="136" alt="Logo de la App">
<h1 class="text-primary">Listado con Vacantes</h1>
<!--  <table class="table table-striped  table-dark  table-bordered table-hover"> -->
<table class="table table-striped  table-bordered table-hover">

    <!--
   <table>: Define una tabla en HTML.
   <thread>: Significa "Table Head" y se utiliza para agrupar el contenido del encabezado de una tabla.
   <tr>:    Significa "Table Row" y se usa para definir una fila en una tabla.
   <th>:    Significa "Table Header" y se utiliza para definir una encabezado  celda de  en una tabla.
   <td>:    Significa "Table Data" y se usa para definir una celda de datos en una tabla.
   -->


    <thead>
    <tr>
        <th>Logo</th>
        <th>Id</th>
        <th>Nombre</th>
        <th>Descripción</th>
        <th>Fecha Publicación</th>
        <th>Salario</th>
        <th>Destacado</th>
        <th>Editar</th>
        <th>Borrar</th>
    </tr>
    </thead>
    <tbody>
    <!-- 3. Se asume que 'vacantes' es una lista de objetos vacante pasados desde el controlador -->
    <tr th:each="vacante : ${vacantes}">

        <td>
            <!-- Se asume que el nombre de la imagen está en el campo 'imagen' del objeto
             vacante -->

            <img src="#" th:src="@{/images/{img}(img=${vacante.imagen})}" width="100"
                 height="100" alt="Logo de la vacante">
        </td>


        <td th:text="${vacante.id}"></td>
        <td th:text="${vacante.nombre}"></td>
        <td th:text="${vacante.descripcion}"></td>
        <!--
        En Thymeleaf, el símbolo de la almohadilla (#)
        se utiliza para acceder a los "Objetos de Utilidad" (Utility Objects).

        1.
        #dates: Es la caja de herramientas para trabajar con fechas (java.util.Date,
        java.util.Calendar, etc.).•#dates.format(vacante.fecha, 'dd-MM-yyyy'): Le estás diciendo a
        Thymeleaf: "Toma el objeto Date del campo vacante.fecha, y usa la herramienta format
        de la caja #dates para convertirlo en un texto con el formato 'día-mes-año'".

        2.
        #numbers: Es la caja de herramientas para formatear números.
        #numbers.formatCurrency(vacante.salario): Le estás diciendo:
        "Toma el valor numérico del campo vacante.salario y usa la herramienta
        formatCurrency de la caja #numbers para mostrarlo como una moneda
        (por ejemplo, añadiendo el símbolo de dólar $, comas para los miles y dos decimales)".
        En resumen: El # es tu atajo para usar las potentes "cajas de herramientas"
        de Thymeleaf para formatear fechas, números, cadenas de texto, listas y mucho más.
        -->
        <td th:text="${#dates.format(vacante.fecha, 'dd-MM-yyyy')}"></td>
        <td th:text="${#numbers.formatCurrency(vacante.salario)}"></td>
        <td>
            <span th:if="${vacante.destacado == 1}" class="badge badge-success">Si</span>
            <span th:unless="${vacante.destacado == 1}"
                  class="badge badge-danger">No</span>
        </td>
        <td>
            <!-- 4. Corregido 'href' por 'th:href' para que Thymeleaf procese el enlace -->
            <!--Resumen: role="button" describe la función de un elemento, mientras que
             aria-hidden="true" oculta los adornos que no aportan nada nuevo.-->

            <a th:href="@{/vacantes/editar/{id}(id=${vacante.id})}"
               class="btn btn-warning btn-sm" role="button" title="Editar">
                <i class="fas fa-pencil-alt" aria-hidden="true"></i>
            </a>
        </td>
        <td>
            <!-- 4. Corregido 'href' por 'th:href' y eliminado el '>' extra al final -->
            <a th:href="@{/vacantes/borrar/{id}(id=${vacante.id})}"
               class="btn btn-danger btn-sm" role="button" title="Borrar">
                <i class="fas fa-trash-alt" aria-hidden="true"></i>
            </a>
        </td>
    </tr>
    </tbody>
</table>

<!-- 5. Limpieza de scripts: se dejan solo los necesarios y se usa th:src -->
<script th:src="@{/js/jquery-3.3.1.slim.min.js}"></script>
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
