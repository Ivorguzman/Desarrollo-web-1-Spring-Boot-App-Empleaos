<!DOCTYPE html>
<!--
  La directiva 'suppress ALL' es específica de los IDEs (como IntelliJ IDEA)
  y le dice que no muestre advertencias para este archivo. Es útil durante el desarrollo.
-->
<!--suppress ALL -->

<!--
  La etiqueta <html> es la raíz de todo documento HTML.
  - lang="en": Define el idioma del contenido como inglés (se podría cambiar a "es" para español).
  - xmlns:th="http://www.thymeleaf.org": Esta es la declaración MÁS IMPORTANTE para Thymeleaf.
    Declara el "namespace" de Thymeleaf, permitiendo que el navegador y las herramientas
    entiendan que todos los atributos que empiezan con "th:" pertenecen a Thymeleaf.
-->
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Listado de Vacantes</title>

   <!--
     THYMELEAF EN ACCIÓN: Enlaces a Recursos Estáticos
     - th:href="@{/css/bootstrap.min.css}": Esta es la forma correcta de enlazar recursos en Thymeleaf.
       - th:href: Es el atributo de Thymeleaf que reemplazará el 'href' del HTML final.
       - @{...}: Esta sintaxis se usa para crear URLs (enlaces). Thymeleaf automáticamente
         añadirá el "context path" de la aplicación si es necesario. Esto hace que los enlaces
         sean robustos y funcionen sin importar dónde se despliegue la aplicación.
   -->
   <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
   <link rel="stylesheet" th:href="@{/css/all.min.css}">
   <link rel="stylesheet" th:href="@{/css/tabla.css}">
</head>
<body>

<!--
  THYMELEAF EN ACCIÓN: Mostrar una Imagen Estática
  - th:src="@{/images/logo.png}": Al igual que con th:href, esto crea un enlace a la imagen.
  - src="#": Se usa como un marcador de posición (placeholder). Cuando Thymeleaf procese la página,
    reemplazará este 'src' con el valor generado por 'th:src'.
-->
<img src="#" th:src="@{/images/logo.png}" width="136" height="136" alt="Logo de la App">
<h1 class="text-primary">Listado con Vacantes</h1>

<table class="table table-striped table-bordered table-hover">
   <thead>
   <tr>
      <th>Logo</th>
      <th>Id</th>
      <th>Nombre</th>
      <th>Descripción</th>
      <th>Fecha Publicación</th>
      <th>Salario</th>
      <th>Destacado</th>
      <th>Detalle</th>
      <th>Borrar</th>
   </tr>
   </thead>
   <tbody>
   <!--
     THYMELEAF EN ACCIÓN: Iteración sobre una Colección (El Bucle 'for-each')
     - th:each="vacante : ${vacantes}": Esta es una de las características más potentes de Thymeleaf.
       - ${vacantes}: Accede a la variable 'vacantes' que fue pasada desde el controlador de Spring
         a través del objeto 'Model'. Se espera que sea una lista o colección de objetos.
       - vacante : ...: Declara una variable local llamada 'vacante' que, en cada repetición del bucle,
         contendrá un elemento de la lista 'vacantes'.
     - El resultado es que la etiqueta <tr> (y todo su contenido) se repetirá una vez por cada
       objeto 'Vacante' que haya en la lista 'vacantes'.
   -->
   <tr th:each="vacante : ${vacantes}">

      <td>
         <!--
           THYMELEAF EN ACCIÓN: URL Dinámica con Variables
           - th:src="@{/images/{img}(img=${vacante.imagen})}": Construye una URL dinámica.
              - @{...}: Sintaxis para crear una URL.
              - /images/{img}: Define una URL con una variable de ruta llamada 'img'.
              - (img=${vacante.imagen}): Asigna un valor a la variable de ruta 'img'.
              - ${vacante.imagen}: Obtiene el valor de la propiedad 'imagen' del
                objeto 'vacante' actual en el bucle (por ejemplo, "logo1.png").
           - El resultado final sería una URL como "/images/logo1.png".
         -->
         <img src="#" th:src="@{/images/{img}(img=${vacante.imagen})}" width="100"
              height="100" alt="Logo de la vacante">
      </td>

      <!--
        THYMELEAF EN ACCIÓN: Mostrar Texto de Forma Segura
        - th:text="${vacante.id}": Muestra el valor de la propiedad 'id' del objeto 'vacante'.
        - th:text: Reemplaza el contenido de la etiqueta <td> con el valor proporcionado.
        - Es seguro contra ataques XSS (Cross-Site Scripting) porque escapa cualquier
            carácter HTML, mostrando el texto plano en lugar de interpretarlo como HTML.
      -->
      <td th:text="${vacante.id}"></td>
      <td th:text=${vacante.nombre}></td>
      <td th:text="${vacante.descripcion}"></td>

      <!--
        THYMELEAF EN ACCIÓN: Uso de Objetos de Utilidad (#) para Formatear
        - El símbolo '#' se usa para acceder a los "Objetos de Utilidad" de Thymeleaf.
        - th:text="${#dates.format(vacante.fecha, 'dd-MM-yyyy')}":
        - #dates: Es la caja de herramientas para trabajar con fechas (java.util.Date,
            java.util.Calendar, etc.).•#dates.format(vacante.fecha, 'dd-MM-yyyy'): Le
            estás diciendo a Thymeleaf: "Toma el objeto Date del campo vacante.fecha,
            y usa la herramienta format de la caja #dates para convertirlo en un texto
            con el formato 'día-mes-año'".
          - .format(...): Es un método de #dates que formatea una fecha a un String.
          - vacante.fecha: El objeto Date que se va a formatear.
          - 'dd-MM-yyyy': El patrón de formato deseado.-->
      <td th:text="${#dates.format(vacante.fecha, 'dd-MM-yyyy')}"></td>

      <!--
        THYMELEAF EN ACCIÓN: Formateo de Números
        - th:text="${#numbers.formatCurrency(vacante.salario)}":
        - #numbers.formatCurrency(vacante.salario): Le estás diciendo:
          "Toma el valor numérico del campo vacante.salario y usa la herramienta
          formatCurrency de la caja #numbers para mostrarlo como una moneda
          (por ejemplo, añadiendo el símbolo de dólar $,
          comas para los miles y dos decimales)".
        - .formatCurrency(...): Formatea un número como una moneda, añadiendo el
           símbolo de la moneda local (ej. $, €) y los separadores de miles/decimales.
      -->
      <td th:text="${#numbers.formatCurrency(vacante.salario)}"></td>
      <td>
         <!--
           THYMELEAF EN ACCIÓN: Lógica Condicional
           - th:if="${vacante.destacado == 1}": Muestra la etiqueta <span> (y su contenido)
             SOLAMENTE SI la condición es verdadera. En este caso, si la propiedad 'destacado' es 1.
           - th:unless="${vacante.destacado == 1}": Es lo contrario de th:if. Muestra la etiqueta
             SOLAMENTE SI la condición es falsa. Es una forma más legible que escribir "th:if not ...".
         -->
         <span th:if="${vacante.destacado == 1}" class="badge badge-success">Si</span>
         <span th:unless="${vacante.destacado == 1}" class="badge badge-danger">No</span>
      </td>

      <!--
        THYMELEAF EN ACCIÓN: Enlaces Dinámicos para Acciones
        - th:href="@{/vacantes/editar/{id}(id=${vacante.id})}": Crea un enlace dinámico para editar.
        - /vacantes/editar/{id}: Define una URL con una variable de ruta 'id'.
        - (id=${vacante.id}): Asigna el valor de la propiedad 'id' del objeto 'vacante' actual
            a la variable de ruta 'id'.
        - El resultado es un enlace único para cada fila, como "/vacantes/editar/1", "/vacantes/editar/2", etc.
      -->


      <td>
         <!--
           THYMELEAF EN ACCIÓN: Enlace con Parámetro de Consulta (Query Parameter)
           - th:href="@{/vacantes/view-request(idVacante=${vacante.id})}": Crea un enlace dinámico para la acción de editar.
             - @{...}: Sintaxis para crear una URL.
             - /vacantes/view-request: Es la ruta base a la que apuntará el enlace.
             - (idVacante=${vacante.id}): Esta sintaxis con paréntesis se usa para añadir PARÁMETROS DE CONSULTA.
               - 'idVacante' es el nombre del parámetro.
               - ${vacante.id} es el valor obtenido del objeto 'vacante' actual.
           - El resultado es una URL con un formato como "/vacantes/view-request?idVacante=1", etc.
           - Este tipo de URL es manejada en el controlador de Spring por un método que usa la anotación @RequestParam("idVacante")
             para capturar el valor del parámetro.
         -->
         <!-- Con Anotación @RequestParam("id") ==> [id=X..]
         Paso de  variable de Ruta :(id=${vacante.id}) ==> [?id=X..] -->
         <a th:href="@{/vacantes/view-request(idVacante=${vacante.id})}"
            class="btn btn-warning btn-sm" role="button" title="Editar">
            <i class="fas fa-pencil-alt" aria-hidden="true"></i>
         </a>


         <!-- Con Anotación @PathVariable("id") ==> Paso de Parameter de Ruta
                 <a th:href="@{/vacantes/view-patch/{id}(id=${vacante.id})}"
                    class="btn btn-warning btn-sm" role="button" title="Editar">
                    <i class="fas fa-pencil-alt" aria-hidden="true"></i>
                 </a>
          -->
      </td>

      <td>
         <!--
      THYMELEAF EN ACCIÓN: Enlace con Parámetro de Consulta (Query Parameter)
   - th:href="@{/vacantes/delete(id=${vacante.id})}": Crea un enlace dinámico para la
      acción de borrado.
      - @{...}: Sintaxis para crear una URL.
      - /vacantes/delete: Es la ruta base a la que apuntará el enlace.
      - (id=${vacante.id}): Esta sintaxis con paréntesis se usa para añadir PARÁMETROS DE CONSULTA.
      - 'id' es el nombre del parámetro.
      - ${vacante.id} es el valor obtenido del objeto 'vacante' actual.
    - El resultado es una URL con un formato como "/vacantes/delete?id=1", "/vacantes/delete?id=2", etc.
    - Este tipo de URL es manejada en el controlador de Spring por un método que usa la
      anotación @RequestParam("id") para capturar el valor del parámetro.-->

         <!-- Con Anotación @RequestParam("id") ==> [id=X..]
          Paso de  variable de Ruta :(id=${vacante.id}) ==> [?id=X..] -->
         <a th:href="@{/vacantes/delete(id=${vacante.id})}"
            class="btn btn-danger btn-sm" role="button" title="Borrar">
            <i class="fas fa-trash-alt" aria-hidden="true"></i>
         </a>
      </td>
   </tr>
   </tbody>
</table>

<!-- Enlaces a los scripts de JavaScript, usando la misma sintaxis robusta de Thymeleaf -->
<script th:src="@{/js/jquery-3.3.1.slim.min.js}"></script>
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
